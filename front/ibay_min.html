<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select2 Example</title>
    <!-- Include necessary CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
</head>
<body>

<!-- Select2 select tag -->
<select id="wallet_select2" style="width: 300px;">
    <option value="" selected>Select a wallet address</option>
</select>

<!-- Include jQuery and Select2 libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
$(document).ready(function() {
    // Initialize Select2
    $('#wallet_select2').select2({
        placeholder: 'Select a wallet address',
        ajax: {
            url: window.location.href.replace('ibay/', 'wallets-endpoint/'), // Replace with your endpoint URL
            dataType: 'json',
            delay: 250, // Delay in milliseconds before the request is sent
            processResults: function(data) {
                // Map received data to Select2 format
                var results = data.wallets.map(function(wallet) {
                    return {
                        id: wallet.id,
                        text: wallet.address
                    };
                });
                // Return processed data
                return {
                    results: results
                };
            },
            cache: true // Enable caching of AJAX results
        }
    });
});
</script>

</body>
</html>
